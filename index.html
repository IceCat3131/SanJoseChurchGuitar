<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¬ä¼šè¯—æ­Œå‰ä»–è°±ç´¢å¼•</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <h1>å¬ä¼šè¯—æ­Œå‰ä»–è°±</h1>
    <p class="site-subtitle">æ”¯æŒå¤§æœ¬ / å°æœ¬ï¼Œå‰ä»–è°± + æ­Œè¯åˆ‡æ¢</p>
  </header>

  <section class="controls">
    <div class="book-switch">
      <button id="btn-book-c" class="book-button active" data-book="c">å¤§æœ¬</button>
      <button id="btn-book-ts" class="book-button" data-book="ts">å°æœ¬</button>
    </div>

    <div class="search-area">
      <input id="search-no" type="number" min="1" placeholder="è¾“å…¥ç¼–å·ï¼Œå¦‚ 7 æˆ– 788" />
      <button id="search-btn" class="search-button" title="è·³è½¬åˆ°è¯¥ç¼–å·">ğŸ”</button>
    </div>
  </section>

  <main class="index-main">
    <p class="index-tip">
      é€‰æ‹© <strong>å¤§æœ¬ / å°æœ¬</strong>ï¼Œç„¶åè¾“å…¥ç¼–å·å¹¶ç‚¹å‡» ğŸ” æˆ–å›è½¦ï¼Œå³å¯è·³è½¬åˆ°è¯¥é¦–æ­Œçš„å‰ä»–è°±é¡µé¢ã€‚<br />
      åœ¨å‰ä»–è°±é¡µé¢ä¸­å¯ä»¥åˆ‡æ¢ <strong>å‰ä»– / æ­Œè¯</strong> è§†å›¾ã€‚
    </p>
  </main>

  <footer class="site-footer">
    <span>ç®€å•é™æ€ç«™ç‚¹ï¼Œå¯ç›´æ¥æ”¾åˆ°ä»»æ„é™æ€ç©ºé—´ä½¿ç”¨ã€‚</span>
  </footer>

  <script>
    // å†Œåˆ«é…ç½®ï¼Œä¸ song.html ä¿æŒä¸€è‡´
    const HYMNBOOKS = {
      c: { id: "c", label: "å¤§æœ¬è¯—æ­Œ", prefix: "c", count: 1000, folder: "c" },
      ts: { id: "ts", label: "å°æœ¬è¯—æ­Œ", prefix: "ts", count: 1000, folder: "ts" }
    };

    let currentBook = "c";

    function applyBookUI(book) {
      const btnBookC = document.getElementById("btn-book-c");
      const btnBookTs = document.getElementById("btn-book-ts");
      if (btnBookC && btnBookTs) {
        btnBookC.classList.toggle("active", book === "c");
        btnBookTs.classList.toggle("active", book === "ts");
      }
      currentBook = book;
    }

    function gotoSong(book, no) {
      const cfg = HYMNBOOKS[book];
      if (!cfg) return;
      if (no < 1) no = 1;
      if (no > cfg.count) no = cfg.count;
      location.href = "song.html?book=" + encodeURIComponent(book) + "&no=" + encodeURIComponent(no);
    }

    (function setup() {
      const btnBookC = document.getElementById("btn-book-c");
      const btnBookTs = document.getElementById("btn-book-ts");
      const searchInput = document.getElementById("search-no");
      const searchBtn = document.getElementById("search-btn");

      if (btnBookC) {
        btnBookC.addEventListener("click", () => applyBookUI("c"));
      }
      if (btnBookTs) {
        btnBookTs.addEventListener("click", () => applyBookUI("ts"));
      }

      function jumpToSong() {
        const raw = searchInput.value.trim();
        const no = parseInt(raw, 10);
        if (isNaN(no) || no < 1 || no > 1000) {
          alert("è¯·è¾“å…¥ 1~1000 ç¼–å·");
          return;
        }
        gotoSong(currentBook, no);
      }

      if (searchBtn) {
        searchBtn.addEventListener("click", jumpToSong);
      }
      if (searchInput) {
        searchInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            jumpToSong();
          }
        });
      }
    })();
  </script>
</body>
</html>
